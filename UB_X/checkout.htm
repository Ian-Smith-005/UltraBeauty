
<!doctype html>
                        <html>
                            <head>
                                <meta charset='utf-8'>
                                <meta name='viewport' content='width=device-width, initial-scale=1'>
                                <title>Ultra Beauty Checkout</title>
                                <link rel="stylesheet" type="text/css" href="styles/pages/header.css">
                                <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css' rel='stylesheet'>
                                <link href='https://use.fontawesome.com/releases/v5.7.2/css/all.css' rel='stylesheet'>
        <script src="https://kit.fontawesome.com/f3068f95b3.js" crossorigin="anonymous"></script>
        <link href="https://fonts.googleapis.com/css2?family=Maven+Pro:wght@400;500&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="styles/pages/checkout.css">
        <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
        <link rel=”stylesheet” href=”https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css”rel=”nofollow” integrity=”sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm” crossorigin=”anonymous”>

                                </head>
                                <body className='snippet-body'>
                                <div class="container bg-light d-md-flex align-items-center">
                                    <a href="index.html" style="color: rgb(0, 0, 0); text-decoration: none;">
                                        <span class="fas fa-arrow-left" style="color: rgb(21, 21, 21);"></span> Back
                                    </a>
                                    <div class="card box1 shadow-sm p-md-5 p-4">
                                       
                                        <div class="d-flex flex-column">
                                            <div class="d-flex align-items-center justify-content-between text">
                                                <span>Subtotal</span>
                                                <span class="fa-solid fa-money-bill"><span class="ps-1" id="subtotal">0.00</span></span>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between text">
                                                <span>Shipping</span>
                                                <span class="fa-solid fa-money-bill"><span class="ps-1">KSH 200.00</span></span>
                                            </div>
                                            <div class="d-flex align-items-center justify-content-between text mb-4">
                                                <span>Total</span>
                                                <span class="fa-solid fa-money-bill"><span class="ps-1" id="total">0.00</span></span>
                                            </div>
                                            <div class="border-bottom mb-4"></div>
                                            <div class="d-flex flex-column mb-4">
                                                <span class="far fa-file-alt text"><span class="ps-2">Purchase ID:</span></span>
                                                <span class="ps-3" id="purchase-id">SN**********</span>
                                            </div>

                                            <div class="d-flex align-items-center justify-content-between text mt-5">
                                                <div class="d-flex flex-column text">
                                                    <span>Customer Support:</span>
                                                    <span>online chat 24/7</span>
                                                </div>
                                                <a href="https://wa.me/254746668619">
                                                    <div class="btn btn-primary rounded-circle">
                                                      <span class="fas fa-comment-alt"></span>
                                                    </div>
                                                  </a>
                                                  
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card box2 shadow-sm">
                                        <div class="d-flex align-items-center justify-content-between p-md-5 p-4">
                                            <span class="h5 fw-bold m-0">Payment methods</span>
                                            <div class="btn btn-primary bar"><a href="index.html"><span class="fas fa-cart-shopping"></span></a></div>
                                        </div>
                                        <ul class="nav nav-tabs mb-3 px-md-4 px-2">
                                            <li class="nav-item">
                                                <a class="nav-link px-2" aria-current="page" href="#">Credit Card</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link px-2 active" href="#">Mobile Payment</a>
                                            </li>
                                           
                                        </ul>
                                        <div class="px-md-5 px-4 mb-4 d-flex align-items-center">
                                            <div class="btn btn-success me-4"><a href="index.html" ><span class="fas fa-plus"></span></a></div>
                                            <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
                                                <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
                                                <label class="btn btn-outline-primary" for="btnradio1"><span class="pe-1"></span><span id="total" style="color: #fff;">Check Out Cart</span></label>
                                                
                                            </div>
                                        </div>
                                        <form action="">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="d-flex flex-column px-md-5 px-4 mb-4">
                                                        <span> Full Names</span>
                                                        <div class="inputWithIcon">
                                                            <input id="customer_name" class="form-control text-uppercase" type="text" value="" required>
                                                            <span class="far fa-user"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-12">
                                                    <div class="d-flex flex-column px-md-5 px-4 mb-4">
                                                        <span>Mobile Number</span>
                                                        <div class="inputWithIcon">
                                                            <input id="customer_phonenumber" class="form-control" type="tel" value="" required  autocomplete="off" oninput="this.value = this.value.replace(/[^0-9]/g, ''); if(this.value.length > 10) this.value = this.value.slice(0, 10);">
                                                            <span> <img src="https://sp-ao.shortpixel.ai/client/to_auto,q_glossy,ret_img,w_1024/https://tradingroom.co.ke/wp-content/uploads/2021/06/Mpesa-1024x538.png" alt=""></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column ps-md-5 px-md-0 px-4 mb-4">
                                                        <span>Delivery<span class="ps-1">Location</span></span>
                                                        <div class="inputWithIcon">
                                                            <input id="customer_delivery_location" class="form-control" type="text" value="" placeholder="i.e kileleshwa" required oninput="this.value = this.value.toLowerCase();">
                                                            <span class="fas fa-map-marker-alt"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="col-md-6">
                                                    <div class="d-flex flex-column pe-md-5 px-md-0 px-4 mb-4">
                                                        <span>Delivery county</span>
                                                        <div class="inputWithIcon">
                                                            <select name="counties" id="counties" >
                                                                <option value="" class="text-uppercase">Select</option>
                                                                <option value="Baringo">Baringo</option>
                                                                <option value="Bomet">Bomet</option>
                                                                <option value="Bungoma">Bungoma</option>
                                                                <option value="Busia">Busia</option>
                                                                <option value="Elgeyo-Marakwet">Elgeyo-Marakwet</option>
                                                                <option value="Embu">Embu</option>
                                                                <option value="Garissa">Garissa</option>
                                                                <option value="Homa Bay">Homa Bay</option>
                                                                <option value="Isiolo">Isiolo</option>
                                                                <option value="Kajiado">Kajiado</option>
                                                                <option value="Kakamega">Kakamega</option>
                                                                <option value="Kericho">Kericho</option>
                                                                <option value="Kiambu">Kiambu</option>
                                                                <option value="Kilifi">Kilifi</option>
                                                                <option value="Kirinyaga">Kirinyaga</option>
                                                                <option value="Kisii">Kisii</option>
                                                                <option value="Kisumu">Kisumu</option>
                                                                <option value="Kitui">Kitui</option>
                                                                <option value="Kwale">Kwale</option>
                                                                <option value="Laikipia">Laikipia</option>
                                                                <option value="Lamu">Lamu</option>
                                                                <option value="Machakos">Machakos</option>
                                                                <option value="Makueni">Makueni</option>
                                                                <option value="Mandera">Mandera</option>
                                                                <option value="Marsabit">Marsabit</option>
                                                                <option value="Meru">Meru</option>
                                                                <option value="Migori">Migori</option>
                                                                <option value="Mombasa">Mombasa</option>
                                                                <option value="Murang'a">Murang'a</option>
                                                                <option value="Nairobi">Nairobi</option>
                                                                <option value="Nakuru">Nakuru</option>
                                                                <option value="Nandi">Nandi</option>
                                                                <option value="Narok">Narok</option>
                                                                <option value="Nyamira">Nyamira</option>
                                                                <option value="Nyandarua">Nyandarua</option>
                                                                <option value="Nyeri">Nyeri</option>
                                                                <option value="Samburu">Samburu</option>
                                                                <option value="Siaya">Siaya</option>
                                                                <option value="Taita-Taveta">Taita-Taveta</option>
                                                                <option value="Tana River">Tana River</option>
                                                                <option value="Tharaka-Nithi">Tharaka-Nithi</option>
                                                                <option value="Trans Nzoia">Trans Nzoia</option>
                                                                <option value="Turkana">Turkana</option>
                                                                <option value="Uasin Gishu">Uasin Gishu</option>
                                                                <option value="Vihiga">Vihiga</option>
                                                                <option value="Wajir">Wajir</option>
                                                                <option value="West Pokot">West Pokot</option>
                                                              </select>
                                                            <span class="fas fa-lock"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            
                                                <div class="col-12 px-md-5 px-4 mt-3">
                                                    <button type="submit" id="stkpush_complete_payment" class="btn btn-primary w-100">
                                                         COMPLETE PAYMENT
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                

                                <!-- Receipt -->
                                <div class="card">
                                    <div class="card-body">
                                      <div class="container mb-5 mt-3">
                                        <div class="row d-flex align-items-baseline">
                                          <div class="col-xl-9">
                                            <p style="color: #7e8d9f;font-size: 20px;">Invoice >> <strong id="secondIDnumber"></strong></p>
                                          </div>
                                          <div class="col-xl-3 float-end">
                                            <a class="btn btn-light text-capitalize border-0" data-mdb-ripple-color="dark"><i
                                                class="fas fa-print text-primary"></i> Print</a>
                                            <a class="btn btn-light text-capitalize" data-mdb-ripple-color="dark"><i
                                                class="far fa-file-pdf text-danger"></i> Export</a>
                                          </div>
                                          <hr>
                                        </div>
                                  
                                        <div class="container">
                                          <div class="col-md-12">
                                            <div class="text-center">
                                              <p class="pt-0">Receipt</p>
                                            </div>
                                  
                                          </div>
                                  
                                  
                                          <div class="row">

                                            <div class="col-xl-4">
                                              <p class="text-muted">Invoice</p>
                                              <ul class="list-unstyled">
                                                <li class="text-muted"><i class="fas fa-circle" style="color:#84B0CA ;"></i> <span
                                                    class="fw-bold" id="createDates">Creation Date: </span></li>
                                                <li class="text-muted"><i class="fas fa-circle" style="color:#84B0CA ;"></i> <span
                                                    class="me-1 fw-bold">Status:</span><span class="badge bg-warning text-black fw-bold">
                                                    Unpaid</span></li>
                                              </ul>
                                            </div>
                                          </div>
                                  
                                          <div class="row my-2 mx-1 justify-content-center">
                                            <table class="table table-striped table-borderless">
                                              <thead style="background-color:#84B0CA ;" class="text-white">
                                                <tr>
                                                  <th scope="col">#</th>
                                                  <th scope="col">Description</th>
                                                  <th scope="col">Qty</th>
                                                  <th scope="col">Unit Price</th>
                                                  <th scope="col">Amount</th>
                                                </tr>
                                              </thead>
                                              <tbody>
                                                
                                              </tbody>
                                  
                                            </table>
                                          </div>
                                          <div class="row">
                                            <div class="col-xl-3">
                                              <ul class="list-unstyled">
                                                <li class="text-muted ms-3"><span class="text-black me-4">SubTotal</span><span id="subtotals"> 0.00</span></li>
                                                <li class="text-muted ms-3 mt-2"><span class="text-black me-4">Shipping<span>  200.00</li>
                                              </ul>
                                              <p class="text-black float-start"><span class="text-black me-3"> Total</span><span
                                                  style="font-size: 25px;" id="totals">KSH 0.00</span></p>
                                            </div>
                                          </div>
                                          <hr>
                                          <div class="row">
                                            <div class="col-xl-10">
                                              <p>Thank you for your purchase</p>
                                            </div>
                                          </div>
                                  
                                        </div>
                                      </div>
                                    </div>
                                  </div>
<!-- Receipt -->

                                <script type='text/javascript' src='https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js'></script>
                                <script type='text/javascript' src='#'></script>
                                <script type='text/javascript' src='#'></script>
                                <script type='text/javascript' src='#'></script>
                                <script type='text/javascript'>src='#'</script>
                                <script type='text/javascript'>var myLink = document.querySelector('a[href="#"]');
                                myLink.addEventListener('click', function(e) {
                                  e.preventDefault();
                                });</script>
                            <script>
function generateRandomString(length) {
  const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let result = '';
  for (let i = 0; i < length; i++) {
      const randomIndex = Math.floor(Math.random() * characters.length);
      result += characters[randomIndex];
  }
  return result;
}

// Get the purchaseIdSpan element and set its content
const purchaseIdSpan = document.getElementById('purchase-id');
purchaseIdSpan.textContent = 'UB' + generateRandomString(10);

// Get the purchase-ids element and set its content
const purchaseIdsElement = document.getElementById('secondIDnumber');
purchaseIdsElement.textContent = purchaseIdSpan.textContent;
const secondIdElement = document.getElementById('second-id');
secondIdElement = purchaseIdSpan.textContent;

                          </script>
                          <script>
                            // Function to load cart data from localStorage
function loadCartFromStorage() {
  var storedCartItems = localStorage.getItem("cartItems");
  if (storedCartItems) {
      return JSON.parse(storedCartItems);
  }
  return []; // Return an empty array if no cart data is found in localStorage
}

// Function to populate the table with cart data
function populateTable() {
  var tbody = document.querySelector("tbody");
  var cartItems = loadCartFromStorage();

  // Loop through cart items and populate the table rows
  cartItems.forEach(function (item, index) {
      var row = document.createElement("tr");
      row.innerHTML = `
          <th scope="row">${index + 1}</th>
          <td>${item.title}</td>
          <td>${item.quantity}</td>
          <td>${item.currency} ${item.price.toFixed(2)}</td>
          <td>${item.currency} ${(item.price * item.quantity).toFixed(2)}</td>
      `;
      tbody.appendChild(row);
  });
}

// Call the function to populate the table with cart data
populateTable();

                          </script>
                          <script>
                              // Get the current date
var createDate = new Date();

// Define months array for formatting
var months = [
  "Jan", "Feb", "Mar", "Apr", "May", "Jun",
  "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
];
// Format the date as "Mon DD, YYYY"
var formattedDate = months[createDate.getMonth()] + " " +
                 createDate.getDate() + "," +
                 createDate.getFullYear();

// Set the formatted date to the <li> element with class "fw-bold"
var creationDateElement = document.getElementById('createDates');
creationDateElement.textContent = 'Creation Date: ' + formattedDate;

                          </script>
                        
                             <script src="scripts/checkout.js"></script>
                             <script>
document.getElementById("stkpush_complete_payment").addEventListener("click", function(event) {
    event.preventDefault(); // Prevent the default form submission behavior

    // Get values from input fields
    const fullName = document.getElementById("customer_name").value;
    const phoneNumber = document.getElementById("customer_phonenumber").value;
    const deliveryLocation = document.getElementById("customer_delivery_location").value;
    const selectedCounty = document.getElementById("counties").value;

    // Create an object to store the data
    const paymentData = {
        fullName: fullName,
        phoneNumber: phoneNumber,
        deliveryLocation: deliveryLocation,
        county: selectedCounty
    };

    // Send the data to your Node.js server
    fetch("http://localhost:4000/api/payment", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(paymentData)
    })
    .then(response => response.json())
    .then(data => {
        // Handle the response from the server, e.g., show a success message
        console.log("Payment data sent successfully:", data);
    })
    .catch(error => {
        // Handle any errors that occur during the POST request
        console.error("Error sending payment data:", error);
    });
});
                             </script>
                                 </body>
                            </html>